<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.52">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Работа со строками – Введение в анализ данных на R для гуманитарных и социальных наук</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./5_working_with_texts.html" rel="next">
<link href="./3_data_visualization.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./4_working_with_strings.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Работа со строками</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Введение в анализ данных на R для гуманитарных и социальных наук</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Предисловие</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_introduction_to_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Введение в R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_data_transformation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Трансформация данных</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_data_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Визуализация данных</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_working_with_strings.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Работа со строками</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_working_with_texts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Работа с текстами</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6_working_with_time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Работа со временем</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7_working_with_geodata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Работа с геоданными</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8_regression_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Основы статистического анализа</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9_introduction_to_quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Введение в <code>quarto</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Список литературы</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#работа-со-строками-в-r" id="toc-работа-со-строками-в-r" class="nav-link active" data-scroll-target="#работа-со-строками-в-r"><span class="header-section-number">4.1</span> Работа со строками в R</a></li>
  <li><a href="#как-получить-строку" id="toc-как-получить-строку" class="nav-link" data-scroll-target="#как-получить-строку"><span class="header-section-number">4.2</span> Как получить строку?</a></li>
  <li><a href="#соединение-и-разделение-строк" id="toc-соединение-и-разделение-строк" class="nav-link" data-scroll-target="#соединение-и-разделение-строк"><span class="header-section-number">4.3</span> Соединение и разделение строк</a></li>
  <li><a href="#количество-символов" id="toc-количество-символов" class="nav-link" data-scroll-target="#количество-символов"><span class="header-section-number">4.4</span> Количество символов</a>
  <ul class="collapse">
  <li><a href="#подсчет-количества-символов" id="toc-подсчет-количества-символов" class="nav-link" data-scroll-target="#подсчет-количества-символов"><span class="header-section-number">4.4.1</span> Подсчет количества символов</a></li>
  <li><a href="#подгонка-количества-символов" id="toc-подгонка-количества-символов" class="nav-link" data-scroll-target="#подгонка-количества-символов"><span class="header-section-number">4.4.2</span> Подгонка количества символов</a></li>
  </ul></li>
  <li><a href="#sec-sorting" id="toc-sec-sorting" class="nav-link" data-scroll-target="#sec-sorting"><span class="header-section-number">4.5</span> Сортировка</a></li>
  <li><a href="#поиск-подстроки" id="toc-поиск-подстроки" class="nav-link" data-scroll-target="#поиск-подстроки"><span class="header-section-number">4.6</span> Поиск подстроки</a></li>
  <li><a href="#изменение-строк" id="toc-изменение-строк" class="nav-link" data-scroll-target="#изменение-строк"><span class="header-section-number">4.7</span> Изменение строк</a>
  <ul class="collapse">
  <li><a href="#изменение-регистра" id="toc-изменение-регистра" class="nav-link" data-scroll-target="#изменение-регистра"><span class="header-section-number">4.7.1</span> Изменение регистра</a></li>
  <li><a href="#выделение-подстроки" id="toc-выделение-подстроки" class="nav-link" data-scroll-target="#выделение-подстроки"><span class="header-section-number">4.7.2</span> Выделение подстроки</a></li>
  <li><a href="#замена-подстроки" id="toc-замена-подстроки" class="nav-link" data-scroll-target="#замена-подстроки"><span class="header-section-number">4.7.3</span> Замена подстроки</a></li>
  <li><a href="#удаление-подстроки" id="toc-удаление-подстроки" class="nav-link" data-scroll-target="#удаление-подстроки"><span class="header-section-number">4.7.4</span> Удаление подстроки</a></li>
  <li><a href="#транслитерация-строк" id="toc-транслитерация-строк" class="nav-link" data-scroll-target="#транслитерация-строк"><span class="header-section-number">4.7.5</span> Транслитерация строк</a></li>
  </ul></li>
  <li><a href="#sec-regex" id="toc-sec-regex" class="nav-link" data-scroll-target="#sec-regex"><span class="header-section-number">4.8</span> Регулярные выражения</a>
  <ul class="collapse">
  <li><a href="#экранирование-метасимволов" id="toc-экранирование-метасимволов" class="nav-link" data-scroll-target="#экранирование-метасимволов"><span class="header-section-number">4.8.1</span> Экранирование метасимволов</a></li>
  <li><a href="#классы-знаков" id="toc-классы-знаков" class="nav-link" data-scroll-target="#классы-знаков"><span class="header-section-number">4.8.2</span> Классы знаков</a></li>
  <li><a href="#квантификация" id="toc-квантификация" class="nav-link" data-scroll-target="#квантификация"><span class="header-section-number">4.8.3</span> Квантификация</a></li>
  <li><a href="#позиционная-проверка-look-arounds" id="toc-позиционная-проверка-look-arounds" class="nav-link" data-scroll-target="#позиционная-проверка-look-arounds"><span class="header-section-number">4.8.4</span> Позиционная проверка (look arounds)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Работа со строками</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="работа-со-строками-в-r" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="работа-со-строками-в-r"><span class="header-section-number">4.1</span> Работа со строками в R</h2>
<p>Для работы со строками можно использовать:</p>
<ul>
<li>базовый R</li>
<li>пакет <code>stringr</code> (часть <code>tidyverse</code>)</li>
<li>пакет <code>stringi</code> – отдельный пакет, так что не забудьте его установить:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"stringi"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Мы будем пользоваться в основном пакетами <code>stingr</code> и <code>stringi</code>, так как они в большинстве случаях удобнее. К счастью, функции этих пакетов легко отличить от остальных: функции пакета <code>stringr</code> всегда начинаются с <code>str_</code>, а функции пакета <code>stringi</code> — c <code>stri_</code>.</p>
<p>Существует <a href="https://github.com/rstudio/cheatsheets/raw/master/strings.pdf">cheat sheet по <code>stringr</code></a>.</p>
</section>
<section id="как-получить-строку" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="как-получить-строку"><span class="header-section-number">4.2</span> Как получить строку?</h2>
<ul>
<li>следите за кавычками</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="st">"the quick brown fox jumps over the lazy dog"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick brown fox jumps over the lazy dog"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="st">'the quick brown fox jumps over the lazy dog'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick brown fox jumps over the lazy dog"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="st">"the quick 'brown' fox jumps over the lazy dog"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick 'brown' fox jumps over the lazy dog"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="st">'the quick "brown" fox jumps over the lazy dog'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick \"brown\" fox jumps over the lazy dog"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="st">"the quick </span><span class="sc">\"</span><span class="st">brown</span><span class="sc">\"</span><span class="st"> fox jumps over the lazy dog"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick \"brown\" fox jumps over the lazy dog"</code></pre>
</div>
</div>
<p>Так как бэкслеш экранирует кавычку, если Вы хотите вставить бэкслеш в строку, придется поставить два бэкслеша.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="st">"the quick </span><span class="sc">\"</span><span class="st">brown</span><span class="sc">\"</span><span class="st"> </span><span class="sc">\\</span><span class="st"> fox jumps over the lazy dog"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick \"brown\" \\ fox jumps over the lazy dog"</code></pre>
</div>
</div>
<p>Обычная печать RStudio может прятать происходящее, так что используйте функцию <code>str_view()</code>, чтобы посмотреть содержимое:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"the quick </span><span class="sc">\"</span><span class="st">brown</span><span class="sc">\"</span><span class="st"> </span><span class="sc">\\</span><span class="st"> fox jumps over the lazy dog"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ the quick "brown" \ fox jumps over the lazy dog</code></pre>
</div>
</div>
<ul>
<li>пустая строка</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="st">""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ""</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="st">''</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ""</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">character</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "" "" ""</code></pre>
</div>
</div>
<ul>
<li>преобразование</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "4" "5" "6" "7"</code></pre>
</div>
</div>
<ul>
<li>встроенные векторы</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>letters</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
[20] "t" "u" "v" "w" "x" "y" "z"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>LETTERS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S"
[20] "T" "U" "V" "W" "X" "Y" "Z"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>month.name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "January"   "February"  "March"     "April"     "May"       "June"     
 [7] "July"      "August"    "September" "October"   "November"  "December" </code></pre>
</div>
</div>
<ul>
<li>cоздание рандомных строк</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_rand_strings</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">length =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "uwHpd"          "Wj8ehS"         "ivFSwy7"        "TYu8zw5V"      
 [5] "OuRpjoOg0"      "p0CubNR2yQ"     "xtdycKLOm2k"    "fAGVfylZqBGp"  
 [9] "gE28DTCi0NV0a"  "9MemYE55If0Cvv"</code></pre>
</div>
</div>
<ul>
<li>перемешивает символы внутри строки</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_rand_shuffle</span>(<span class="st">"любя, съешь щипцы, — вздохнёт мэр, — кайф жгуч"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] ",цо м,пюзгу   сл аиъ—в кжряд,ыщьчебэн х—штё фй"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_rand_shuffle</span>(month.name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "aJayunr"   "eyrbraFu"  "achMr"     "Aplri"     "ayM"       "Jnue"     
 [7] "uJly"      "usuAgt"    "tpebermSe" "tOecrbo"   "oeNembvr"  "Dmceerbe" </code></pre>
</div>
</div>
<ul>
<li>псевдорандомный текст<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_rand_lipsum</span>(<span class="at">nparagraphs =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Lorem ipsum dolor sit amet, donec sit nunc urna sed ultricies ac pharetra orci luctus iaculis, ac tincidunt cum. Neque eu semper at sociosqu hendrerit. Eu aliquet lacus, eu hendrerit donec aliquam eros. Risus nibh, quam in sit facilisi ipsum. Amet sem sed donec sed molestie scelerisque tincidunt. Nisl donec et facilisis interdum non sed dolor purus. In ipsum dignissim torquent velit nec aliquam pellentesque. Ac, adipiscing, neque et at torquent, vestibulum ullamcorper. Ad dictumst enim velit non nulla felis habitant. Egestas placerat consectetur, dictum nostra sed nec. Erat phasellus dolor libero aliquam viverra. Vestibulum leo et. Suscipit egestas in in montes, sapien gravida? Conubia purus varius ut nec feugiat."
[2] "Risus eleifend magnis neque diam, suspendisse ullamcorper nulla adipiscing malesuada massa, nisi sociosqu velit id et. Aliquam facilisis et aenean. Parturient vel ac in convallis, massa diam nibh. Nulla interdum cursus et. Natoque amet, ut praesent. Tortor ultrices a consectetur, augue natoque class faucibus? Ut sed arcu elementum magna. Dignissim ac facilisi quis ut nisl eu, massa."                                                                                                                                                                                                                                                                                                                                                  </code></pre>
</div>
</div>
</section>
<section id="соединение-и-разделение-строк" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="соединение-и-разделение-строк"><span class="header-section-number">4.3</span> Соединение и разделение строк</h2>
<p>Соединенить строки можно используя функцию <code>str_c()</code>, в которую, как и в функции <code>с()</code>, можно перечислять элементы через запятую:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">upper =</span> <span class="fu">rev</span>(LETTERS), <span class="at">smaller =</span> letters) <span class="sc">|&gt;</span>  </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">merge =</span> <span class="fu">str_c</span>(upper, smaller))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["upper"],"name":[1],"type":["chr"],"align":["left"]},{"label":["smaller"],"name":[2],"type":["chr"],"align":["left"]},{"label":["merge"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Z","2":"a","3":"Za"},{"1":"Y","2":"b","3":"Yb"},{"1":"X","2":"c","3":"Xc"},{"1":"W","2":"d","3":"Wd"},{"1":"V","2":"e","3":"Ve"},{"1":"U","2":"f","3":"Uf"},{"1":"T","2":"g","3":"Tg"},{"1":"S","2":"h","3":"Sh"},{"1":"R","2":"i","3":"Ri"},{"1":"Q","2":"j","3":"Qj"},{"1":"P","2":"k","3":"Pk"},{"1":"O","2":"l","3":"Ol"},{"1":"N","2":"m","3":"Nm"},{"1":"M","2":"n","3":"Mn"},{"1":"L","2":"o","3":"Lo"},{"1":"K","2":"p","3":"Kp"},{"1":"J","2":"q","3":"Jq"},{"1":"I","2":"r","3":"Ir"},{"1":"H","2":"s","3":"Hs"},{"1":"G","2":"t","3":"Gt"},{"1":"F","2":"u","3":"Fu"},{"1":"E","2":"v","3":"Ev"},{"1":"D","2":"w","3":"Dw"},{"1":"C","2":"x","3":"Cx"},{"1":"B","2":"y","3":"By"},{"1":"A","2":"z","3":"Az"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Кроме того, если хочется, можно использовать особенный разделитель, указав его в аргументе <code>sep</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">upper =</span> <span class="fu">rev</span>(LETTERS), <span class="at">smaller =</span> letters) <span class="sc">|&gt;</span>  </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">merge =</span> <span class="fu">str_c</span>(upper, smaller, <span class="at">sep =</span> <span class="st">"_"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["upper"],"name":[1],"type":["chr"],"align":["left"]},{"label":["smaller"],"name":[2],"type":["chr"],"align":["left"]},{"label":["merge"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Z","2":"a","3":"Z_a"},{"1":"Y","2":"b","3":"Y_b"},{"1":"X","2":"c","3":"X_c"},{"1":"W","2":"d","3":"W_d"},{"1":"V","2":"e","3":"V_e"},{"1":"U","2":"f","3":"U_f"},{"1":"T","2":"g","3":"T_g"},{"1":"S","2":"h","3":"S_h"},{"1":"R","2":"i","3":"R_i"},{"1":"Q","2":"j","3":"Q_j"},{"1":"P","2":"k","3":"P_k"},{"1":"O","2":"l","3":"O_l"},{"1":"N","2":"m","3":"N_m"},{"1":"M","2":"n","3":"M_n"},{"1":"L","2":"o","3":"L_o"},{"1":"K","2":"p","3":"K_p"},{"1":"J","2":"q","3":"J_q"},{"1":"I","2":"r","3":"I_r"},{"1":"H","2":"s","3":"H_s"},{"1":"G","2":"t","3":"G_t"},{"1":"F","2":"u","3":"F_u"},{"1":"E","2":"v","3":"E_v"},{"1":"D","2":"w","3":"D_w"},{"1":"C","2":"x","3":"C_x"},{"1":"B","2":"y","3":"B_y"},{"1":"A","2":"z","3":"A_z"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Иногда хочется составить длинные выражения, которые будут перемежаться значениями из переменных, это можно сделать при помощи функции <code>str_glue()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">month_name =</span> month.name,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">month_abb =</span> month.abb) <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">long_string =</span> <span class="fu">str_glue</span>(<span class="st">"The month {month_name} is abbreviated as {month_abb}"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["month_name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["month_abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["long_string"],"name":[3],"type":["glue"],"align":["right"]}],"data":[{"1":"January","2":"Jan","3":"The month January is abbreviated as Jan"},{"1":"February","2":"Feb","3":"The month February is abbreviated as Feb"},{"1":"March","2":"Mar","3":"The month March is abbreviated as Mar"},{"1":"April","2":"Apr","3":"The month April is abbreviated as Apr"},{"1":"May","2":"May","3":"The month May is abbreviated as May"},{"1":"June","2":"Jun","3":"The month June is abbreviated as Jun"},{"1":"July","2":"Jul","3":"The month July is abbreviated as Jul"},{"1":"August","2":"Aug","3":"The month August is abbreviated as Aug"},{"1":"September","2":"Sep","3":"The month September is abbreviated as Sep"},{"1":"October","2":"Oct","3":"The month October is abbreviated as Oct"},{"1":"November","2":"Nov","3":"The month November is abbreviated as Nov"},{"1":"December","2":"Dec","3":"The month December is abbreviated as Dec"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>В фигурных скобках выступают имена переменных, которые уже есть в датасете. Если Вы хотите вставить в свое длинное выражение фигурные скобки, можно написать их два раза:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">month_name =</span> month.name,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">month_abb =</span> month.abb) <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">long_string =</span> <span class="fu">str_glue</span>(<span class="st">"The {{month}} {month_name} is abbreviated as {month_abb}"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["month_name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["month_abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["long_string"],"name":[3],"type":["glue"],"align":["right"]}],"data":[{"1":"January","2":"Jan","3":"The {month} January is abbreviated as Jan"},{"1":"February","2":"Feb","3":"The {month} February is abbreviated as Feb"},{"1":"March","2":"Mar","3":"The {month} March is abbreviated as Mar"},{"1":"April","2":"Apr","3":"The {month} April is abbreviated as Apr"},{"1":"May","2":"May","3":"The {month} May is abbreviated as May"},{"1":"June","2":"Jun","3":"The {month} June is abbreviated as Jun"},{"1":"July","2":"Jul","3":"The {month} July is abbreviated as Jul"},{"1":"August","2":"Aug","3":"The {month} August is abbreviated as Aug"},{"1":"September","2":"Sep","3":"The {month} September is abbreviated as Sep"},{"1":"October","2":"Oct","3":"The {month} October is abbreviated as Oct"},{"1":"November","2":"Nov","3":"The {month} November is abbreviated as Nov"},{"1":"December","2":"Dec","3":"The {month} December is abbreviated as Dec"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Для разделения строки на подстроки можно использовать функцию <code>separate()</code>. Это функция разносит разделенные элементы строки в соответствующие столбцы. У функции три обязательных аргумента: <code>col</code> — колонка, которую следует разделить, <code>into</code> — вектор названий новых столбцов, <code>sep</code> — разделитель.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">upper =</span> <span class="fu">rev</span>(LETTERS), <span class="at">smaller =</span> letters) <span class="sc">|&gt;</span>  </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">merge =</span> <span class="fu">str_c</span>(upper, smaller, <span class="at">sep =</span> <span class="st">"_"</span>)) <span class="sc">|&gt;</span>  </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> merge, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"column_1"</span>, <span class="st">"column_2"</span>), <span class="at">sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["upper"],"name":[1],"type":["chr"],"align":["left"]},{"label":["smaller"],"name":[2],"type":["chr"],"align":["left"]},{"label":["column_1"],"name":[3],"type":["chr"],"align":["left"]},{"label":["column_2"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Z","2":"a","3":"Z","4":"a"},{"1":"Y","2":"b","3":"Y","4":"b"},{"1":"X","2":"c","3":"X","4":"c"},{"1":"W","2":"d","3":"W","4":"d"},{"1":"V","2":"e","3":"V","4":"e"},{"1":"U","2":"f","3":"U","4":"f"},{"1":"T","2":"g","3":"T","4":"g"},{"1":"S","2":"h","3":"S","4":"h"},{"1":"R","2":"i","3":"R","4":"i"},{"1":"Q","2":"j","3":"Q","4":"j"},{"1":"P","2":"k","3":"P","4":"k"},{"1":"O","2":"l","3":"O","4":"l"},{"1":"N","2":"m","3":"N","4":"m"},{"1":"M","2":"n","3":"M","4":"n"},{"1":"L","2":"o","3":"L","4":"o"},{"1":"K","2":"p","3":"K","4":"p"},{"1":"J","2":"q","3":"J","4":"q"},{"1":"I","2":"r","3":"I","4":"r"},{"1":"H","2":"s","3":"H","4":"s"},{"1":"G","2":"t","3":"G","4":"t"},{"1":"F","2":"u","3":"F","4":"u"},{"1":"E","2":"v","3":"E","4":"v"},{"1":"D","2":"w","3":"D","4":"w"},{"1":"C","2":"x","3":"C","4":"x"},{"1":"B","2":"y","3":"B","4":"y"},{"1":"A","2":"z","3":"A","4":"z"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Кроме того, есть инструмент <code>str_split()</code>, который позволяет разбивать строки на подстроки, но возвращает <em>список</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(month.name, <span class="st">"r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "Janua" "y"    

[[2]]
[1] "Feb" "ua"  "y"  

[[3]]
[1] "Ma" "ch"

[[4]]
[1] "Ap" "il"

[[5]]
[1] "May"

[[6]]
[1] "June"

[[7]]
[1] "July"

[[8]]
[1] "August"

[[9]]
[1] "Septembe" ""        

[[10]]
[1] "Octobe" ""      

[[11]]
[1] "Novembe" ""       

[[12]]
[1] "Decembe" ""       </code></pre>
</div>
</div>
</section>
<section id="количество-символов" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="количество-символов"><span class="header-section-number">4.4</span> Количество символов</h2>
<section id="подсчет-количества-символов" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="подсчет-количества-символов"><span class="header-section-number">4.4.1</span> Подсчет количества символов</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_charactars =</span> <span class="fu">str_count</span>(mn))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n_charactars"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"January","2":"7"},{"1":"February","2":"8"},{"1":"March","2":"5"},{"1":"April","2":"5"},{"1":"May","2":"3"},{"1":"June","2":"4"},{"1":"July","2":"4"},{"1":"August","2":"6"},{"1":"September","2":"9"},{"1":"October","2":"7"},{"1":"November","2":"8"},{"1":"December","2":"8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="подгонка-количества-символов" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="подгонка-количества-символов"><span class="header-section-number">4.4.2</span> Подгонка количества символов</h3>
<p>Можно обрезать строки, используя функцию <code>str_trunc()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_trunc</span>(mn, <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Jan..."},{"1":"February","2":"Feb..."},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"Sep..."},{"1":"October","2":"Oct..."},{"1":"November","2":"Nov..."},{"1":"December","2":"Dec..."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Можно решить с какой стороны обрезать, используя аргумент <code>side</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_trunc</span>(mn, <span class="dv">6</span>, <span class="at">side =</span> <span class="st">"left"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"...ary"},{"1":"February","2":"...ary"},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"...ber"},{"1":"October","2":"...ber"},{"1":"November","2":"...ber"},{"1":"December","2":"...ber"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_trunc</span>(mn, <span class="dv">6</span>, <span class="at">side =</span> <span class="st">"center"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Ja...y"},{"1":"February","2":"Fe...y"},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"Se...r"},{"1":"October","2":"Oc...r"},{"1":"November","2":"No...r"},{"1":"December","2":"De...r"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Можно заменить многоточие, используя аргумент <code>ellipsis</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_trunc</span>(mn, <span class="dv">3</span>, <span class="at">ellipsis =</span> <span class="st">""</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Jan"},{"1":"February","2":"Feb"},{"1":"March","2":"Mar"},{"1":"April","2":"Apr"},{"1":"May","2":"May"},{"1":"June","2":"Jun"},{"1":"July","2":"Jul"},{"1":"August","2":"Aug"},{"1":"September","2":"Sep"},{"1":"October","2":"Oct"},{"1":"November","2":"Nov"},{"1":"December","2":"Dec"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Можно наоборот “раздуть” строку:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_pad</span>(mn, <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"January"},{"1":"February","2":"February"},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"September"},{"1":"October","2":"October"},{"1":"November","2":"November"},{"1":"December","2":"December"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Опять же есть аргумент <code>side</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_pad</span>(mn, <span class="dv">10</span>,  <span class="at">side =</span> <span class="st">"right"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"January"},{"1":"February","2":"February"},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"September"},{"1":"October","2":"October"},{"1":"November","2":"November"},{"1":"December","2":"December"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Также можно выбрать, чем “раздувать строку”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_pad</span>(mn, <span class="dv">10</span>,  <span class="at">pad =</span> <span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"...January"},{"1":"February","2":"..February"},{"1":"March","2":".....March"},{"1":"April","2":".....April"},{"1":"May","2":".......May"},{"1":"June","2":"......June"},{"1":"July","2":"......July"},{"1":"August","2":"....August"},{"1":"September","2":".September"},{"1":"October","2":"...October"},{"1":"November","2":"..November"},{"1":"December","2":"..December"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Кроме того бывает полезной функций <code>str_squish()</code>, которая убирает лишние пробелы в конце и начале строки, а также повторяющиеся пробелы между словами:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(<span class="st">"   много     пробелов        не      бывает    "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "много пробелов не бывает"</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-sorting" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="sec-sorting"><span class="header-section-number">4.5</span> Сортировка</h2>
<p>Для сортировки существует <code>str_sort()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>unsorted_latin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"I"</span>, <span class="st">"♥"</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(unsorted_latin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "♥" "I" "N" "Y"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(unsorted_latin, <span class="at">locale =</span> <span class="st">"lt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "♥" "I" "Y" "N"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>unsorted_cyrillic <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"я"</span>, <span class="st">"i"</span>, <span class="st">"ж"</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(unsorted_cyrillic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "i" "ж" "я"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(unsorted_cyrillic, <span class="at">locale =</span> <span class="st">"ru_UA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ж" "я" "i"</code></pre>
</div>
</div>
<p>Список локалей на компьютере можно посмотреть командой <code>stringi::stri_locale_list()</code>. Список всех локалей вообще приведен <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">на этой странице</a>. Еще полезные команды: <code>stringi::stri_locale_info</code> и <code>stringi::stri_locale_set</code>.</p>
</section>
<section id="поиск-подстроки" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="поиск-подстроки"><span class="header-section-number">4.6</span> Поиск подстроки</h2>
<p>Можно использовать функцию <code>str_detect()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">has_r =</span> <span class="fu">str_detect</span>(mn, <span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["has_r"],"name":[2],"type":["lgl"],"align":["right"]}],"data":[{"1":"January","2":"TRUE"},{"1":"February","2":"TRUE"},{"1":"March","2":"TRUE"},{"1":"April","2":"TRUE"},{"1":"May","2":"FALSE"},{"1":"June","2":"FALSE"},{"1":"July","2":"FALSE"},{"1":"August","2":"FALSE"},{"1":"September","2":"TRUE"},{"1":"October","2":"TRUE"},{"1":"November","2":"TRUE"},{"1":"December","2":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Кроме того, существует функция, которая возвращает индексы, а не значения <code>TRUE</code>/<code>FALSE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">str_which</span>(month.name, <span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"January"},{"1":"February"},{"1":"March"},{"1":"April"},{"1":"September"},{"1":"October"},{"1":"November"},{"1":"December"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Также можно посчитать количество вхождений какой-то подстроки:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">has_r =</span> <span class="fu">str_count</span>(mn, <span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["has_r"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"January","2":"1"},{"1":"February","2":"2"},{"1":"March","2":"1"},{"1":"April","2":"1"},{"1":"May","2":"0"},{"1":"June","2":"0"},{"1":"July","2":"0"},{"1":"August","2":"0"},{"1":"September","2":"1"},{"1":"October","2":"1"},{"1":"November","2":"1"},{"1":"December","2":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="изменение-строк" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="изменение-строк"><span class="header-section-number">4.7</span> Изменение строк</h2>
<section id="изменение-регистра" class="level3" data-number="4.7.1">
<h3 data-number="4.7.1" class="anchored" data-anchor-id="изменение-регистра"><span class="header-section-number">4.7.1</span> Изменение регистра</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>latin <span class="ot">&lt;-</span> <span class="st">"tHe QuIcK BrOwN fOx JuMpS OvEr ThE lAzY dOg"</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>cyrillic <span class="ot">&lt;-</span> <span class="st">"лЮбЯ, сЪеШь ЩиПцЫ, — вЗдОхНёТ мЭр, — кАйФ жГуЧ"</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(latin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(cyrillic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "любя, съешь щипцы, — вздохнёт мэр, — кайф жгуч"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(latin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The Quick Brown Fox Jumps Over The Lazy Dog"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_sentence</span>(latin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The quick brown fox jumps over the lazy dog"</code></pre>
</div>
</div>
</section>
<section id="выделение-подстроки" class="level3" data-number="4.7.2">
<h3 data-number="4.7.2" class="anchored" data-anchor-id="выделение-подстроки"><span class="header-section-number">4.7.2</span> Выделение подстроки</h3>
<p>Подстроку в строке можно выделить двумя способами: по индексам функцией <code>str_sub()</code>, и по подстроке функцией <code>str_png()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_sub</span>(mn, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Ja"},{"1":"February","2":"Fe"},{"1":"March","2":"Ma"},{"1":"April","2":"Ap"},{"1":"May","2":"Ma"},{"1":"June","2":"Ju"},{"1":"July","2":"Ju"},{"1":"August","2":"Au"},{"1":"September","2":"Se"},{"1":"October","2":"Oc"},{"1":"November","2":"No"},{"1":"December","2":"De"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_extract</span>(mn, <span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"r"},{"1":"February","2":"r"},{"1":"March","2":"r"},{"1":"April","2":"r"},{"1":"May","2":"NA"},{"1":"June","2":"NA"},{"1":"July","2":"NA"},{"1":"August","2":"NA"},{"1":"September","2":"r"},{"1":"October","2":"r"},{"1":"November","2":"r"},{"1":"December","2":"r"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>По умолчанию функция <code>str_extract()</code> возвращает первое вхождение подстроки, соответствующей шаблону. Также существует функция <code>str_extract_all()</code>, которая возвращает все вхождения подстрок, соответствующих шаблону в виде объекта типа список.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(month.name, <span class="st">"r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "r"

[[2]]
[1] "r" "r"

[[3]]
[1] "r"

[[4]]
[1] "r"

[[5]]
character(0)

[[6]]
character(0)

[[7]]
character(0)

[[8]]
character(0)

[[9]]
[1] "r"

[[10]]
[1] "r"

[[11]]
[1] "r"

[[12]]
[1] "r"</code></pre>
</div>
</div>
</section>
<section id="замена-подстроки" class="level3" data-number="4.7.3">
<h3 data-number="4.7.3" class="anchored" data-anchor-id="замена-подстроки"><span class="header-section-number">4.7.3</span> Замена подстроки</h3>
<p>Существует функция <code>str_replace()</code>, которая позволяет заменить одну подстроку в строке на другую:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_replace</span>(mn, <span class="st">"r"</span>, <span class="st">"R"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"JanuaRy"},{"1":"February","2":"FebRuary"},{"1":"March","2":"MaRch"},{"1":"April","2":"ApRil"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"SeptembeR"},{"1":"October","2":"OctobeR"},{"1":"November","2":"NovembeR"},{"1":"December","2":"DecembeR"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Как и другие функции, <code>str_replace()</code> делает лишь одну замену, чтобы заменить все вхождения подстроки следует использовать функцию <code>str_replace_all()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">|&gt;</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_replace_all</span>(mn, <span class="st">"r"</span>, <span class="st">"R"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"JanuaRy"},{"1":"February","2":"FebRuaRy"},{"1":"March","2":"MaRch"},{"1":"April","2":"ApRil"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"SeptembeR"},{"1":"October","2":"OctobeR"},{"1":"November","2":"NovembeR"},{"1":"December","2":"DecembeR"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="удаление-подстроки" class="level3" data-number="4.7.4">
<h3 data-number="4.7.4" class="anchored" data-anchor-id="удаление-подстроки"><span class="header-section-number">4.7.4</span> Удаление подстроки</h3>
<p>Для удаления подстроки на основе шаблона используется функция <code>str_remove()</code> и <code>str_remove_all()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(month.name) <span class="sc">|&gt;</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_remove</span>(month.name, <span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["month.name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Januay"},{"1":"February","2":"Febuary"},{"1":"March","2":"Mach"},{"1":"April","2":"Apil"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"Septembe"},{"1":"October","2":"Octobe"},{"1":"November","2":"Novembe"},{"1":"December","2":"Decembe"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(month.name) <span class="sc">|&gt;</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_remove_all</span>(month.name, <span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["month.name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Januay"},{"1":"February","2":"Febuay"},{"1":"March","2":"Mach"},{"1":"April","2":"Apil"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"Septembe"},{"1":"October","2":"Octobe"},{"1":"November","2":"Novembe"},{"1":"December","2":"Decembe"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="транслитерация-строк" class="level3" data-number="4.7.5">
<h3 data-number="4.7.5" class="anchored" data-anchor-id="транслитерация-строк"><span class="header-section-number">4.7.5</span> Транслитерация строк</h3>
<p>В пакете <code>stringi</code> существует достаточно много методов транслитераций строк, которые можно вывести командой <code>stri_trans_list()</code>. Вот пример использования некоторых из них:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_trans_general</span>(<span class="st">"stringi"</span>, <span class="st">"latin-cyrillic"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "стринги"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_trans_general</span>(<span class="st">"сырники"</span>, <span class="st">"cyrillic-latin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "syrniki"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_trans_general</span>(<span class="st">"stringi"</span>, <span class="st">"latin-greek"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "στριγγι"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_trans_general</span>(<span class="st">"stringi"</span>, <span class="st">"latin-armenian"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ստրինգի"</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-regex" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="sec-regex"><span class="header-section-number">4.8</span> Регулярные выражения</h2>
<p>Большинство функций из раздела об операциях над векторами (<code>str_detect()</code>, <code>str_extract()</code>, <code>str_remove()</code> и т. п.) имеют следующую структуру:</p>
<ul>
<li>строка, с которой работает функция</li>
<li>образец (pattern)</li>
</ul>
<p>Дальше мы будем использовать функцию <code>str_view()</code>, которая позволяет показывать выделенное образцом в исходной строке.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Я всегда путаю с и c"</span>, <span class="st">"c"</span>) <span class="co"># я ищу латинскую c</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Я всегда путаю с и &lt;c&gt;</code></pre>
</div>
</div>
<section id="экранирование-метасимволов" class="level3" data-number="4.8.1">
<h3 data-number="4.8.1" class="anchored" data-anchor-id="экранирование-метасимволов"><span class="header-section-number">4.8.1</span> Экранирование метасимволов</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">"Всем известно, что 4$</span><span class="sc">\\</span><span class="st">2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]"</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]&lt;&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4&lt;$&gt;\2 + 3&lt;$&gt; * 5 = 17&lt;$&gt;? Да? Ну хорошо (а то я не был уверен). [|}^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен)&lt;.&gt; [|}^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ &lt;*&gt; 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 &lt;+&gt; 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$&lt;?&gt; Да&lt;?&gt; Ну хорошо (а то я не был уверен). [|}^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">("</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо &lt;(&gt;а то я не был уверен). [|}^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен&lt;)&gt;. [|}^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [&lt;|&gt;}^{&lt;|&gt;]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">^"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}&lt;^&gt;{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">["</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). &lt;[&gt;|}^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|&lt;]&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">{"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^&lt;{&gt;|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\</span><span class="st">}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|&lt;}&gt;^{|]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(a, <span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Всем известно, что 4$&lt;\&gt;2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]</code></pre>
</div>
</div>
</section>
<section id="классы-знаков" class="level3" data-number="4.8.2">
<h3 data-number="4.8.2" class="anchored" data-anchor-id="классы-знаков"><span class="header-section-number">4.8.2</span> Классы знаков</h3>
<ul>
<li><code>\\d</code> – цифры. <code>\\D</code> – не цифры.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"два 15 42. 42 15. 37 08 5. 20 20 20!"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">d"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ два &lt;1&gt;&lt;5&gt; &lt;4&gt;&lt;2&gt;. &lt;4&gt;&lt;2&gt; &lt;1&gt;&lt;5&gt;. &lt;3&gt;&lt;7&gt; &lt;0&gt;&lt;8&gt; &lt;5&gt;. &lt;2&gt;&lt;0&gt; &lt;2&gt;&lt;0&gt; &lt;2&gt;&lt;0&gt;!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"два 15 42. 42 15. 37 08 5. 20 20 20!"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">D"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;д&gt;&lt;в&gt;&lt;а&gt;&lt; &gt;15&lt; &gt;42&lt;.&gt;&lt; &gt;42&lt; &gt;15&lt;.&gt;&lt; &gt;37&lt; &gt;08&lt; &gt;5&lt;.&gt;&lt; &gt;20&lt; &gt;20&lt; &gt;20&lt;!&gt;</code></pre>
</div>
</div>
<ul>
<li><code>\\s</code> – пробелы. <code>\\S</code> – не пробелы.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"два 15 42. 42 15. 37 08 5. 20 20 20!"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">s"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ два&lt; &gt;15&lt; &gt;42.&lt; &gt;42&lt; &gt;15.&lt; &gt;37&lt; &gt;08&lt; &gt;5.&lt; &gt;20&lt; &gt;20&lt; &gt;20!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"два 15 42. 42 15. 37 08 5. 20 20 20!"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">S"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;д&gt;&lt;в&gt;&lt;а&gt; &lt;1&gt;&lt;5&gt; &lt;4&gt;&lt;2&gt;&lt;.&gt; &lt;4&gt;&lt;2&gt; &lt;1&gt;&lt;5&gt;&lt;.&gt; &lt;3&gt;&lt;7&gt; &lt;0&gt;&lt;8&gt; &lt;5&gt;&lt;.&gt; &lt;2&gt;&lt;0&gt; &lt;2&gt;&lt;0&gt; &lt;2&gt;&lt;0&gt;&lt;!&gt;</code></pre>
</div>
</div>
<ul>
<li><code>\\w</code> – не пробелы и не знаки препинания. <code>\\W</code> – пробелы и знаки препинания.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"два 15 42. 42 15. 37 08 5. 20 20 20!"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">w"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;д&gt;&lt;в&gt;&lt;а&gt; &lt;1&gt;&lt;5&gt; &lt;4&gt;&lt;2&gt;. &lt;4&gt;&lt;2&gt; &lt;1&gt;&lt;5&gt;. &lt;3&gt;&lt;7&gt; &lt;0&gt;&lt;8&gt; &lt;5&gt;. &lt;2&gt;&lt;0&gt; &lt;2&gt;&lt;0&gt; &lt;2&gt;&lt;0&gt;!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"два 15 42. 42 15. 37 08 5. 20 20 20!"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">W"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ два&lt; &gt;15&lt; &gt;42&lt;.&gt;&lt; &gt;42&lt; &gt;15&lt;.&gt;&lt; &gt;37&lt; &gt;08&lt; &gt;5&lt;.&gt;&lt; &gt;20&lt; &gt;20&lt; &gt;20&lt;!&gt;</code></pre>
</div>
</div>
<ul>
<li>произвольная группа символов и обратная к ней</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Умей мечтать, не став рабом мечтанья"</span>, <span class="st">"[оауиыэёеяю]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Ум&lt;е&gt;й м&lt;е&gt;чт&lt;а&gt;ть, н&lt;е&gt; ст&lt;а&gt;в р&lt;а&gt;б&lt;о&gt;м м&lt;е&gt;чт&lt;а&gt;нь&lt;я&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"И мыслить, мысли не обожествив"</span>, <span class="st">"[^оауиыэёеяю]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;И&gt;&lt; &gt;&lt;м&gt;ы&lt;с&gt;&lt;л&gt;и&lt;т&gt;&lt;ь&gt;&lt;,&gt;&lt; &gt;&lt;м&gt;ы&lt;с&gt;&lt;л&gt;и&lt; &gt;&lt;н&gt;е&lt; &gt;о&lt;б&gt;о&lt;ж&gt;е&lt;с&gt;&lt;т&gt;&lt;в&gt;и&lt;в&gt;</code></pre>
</div>
</div>
<ul>
<li>встроенные группы символов</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"два 15 42. 42 15. 37 08 5. 20 20 20!"</span>, <span class="st">"[0-9]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ два &lt;1&gt;&lt;5&gt; &lt;4&gt;&lt;2&gt;. &lt;4&gt;&lt;2&gt; &lt;1&gt;&lt;5&gt;. &lt;3&gt;&lt;7&gt; &lt;0&gt;&lt;8&gt; &lt;5&gt;. &lt;2&gt;&lt;0&gt; &lt;2&gt;&lt;0&gt; &lt;2&gt;&lt;0&gt;!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"[а-я]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ К&lt;а&gt;&lt;р&gt;&lt;л&gt; &lt;у&gt; К&lt;л&gt;&lt;а&gt;&lt;р&gt;&lt;ы&gt; &lt;у&gt;&lt;к&gt;&lt;р&gt;&lt;а&gt;&lt;л&gt; &lt;к&gt;&lt;о&gt;&lt;р&gt;&lt;а&gt;&lt;л&gt;&lt;л&gt;&lt;ы&gt;, &lt;а&gt; К&lt;л&gt;&lt;а&gt;&lt;р&gt;&lt;а&gt; &lt;у&gt; К&lt;а&gt;&lt;р&gt;&lt;л&gt;&lt;а&gt; &lt;у&gt;&lt;к&gt;&lt;р&gt;&lt;а&gt;&lt;л&gt;&lt;а&gt; &lt;к&gt;&lt;л&gt;&lt;а&gt;&lt;р&gt;&lt;н&gt;&lt;е&gt;&lt;т&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"[А-Я]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;К&gt;арл у &lt;К&gt;лары украл кораллы, а &lt;К&gt;лара у &lt;К&gt;арла украла кларнет</code></pre>
</div>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"[А-я]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;К&gt;&lt;а&gt;&lt;р&gt;&lt;л&gt; &lt;у&gt; &lt;К&gt;&lt;л&gt;&lt;а&gt;&lt;р&gt;&lt;ы&gt; &lt;у&gt;&lt;к&gt;&lt;р&gt;&lt;а&gt;&lt;л&gt; &lt;к&gt;&lt;о&gt;&lt;р&gt;&lt;а&gt;&lt;л&gt;&lt;л&gt;&lt;ы&gt;, &lt;а&gt; &lt;К&gt;&lt;л&gt;&lt;а&gt;&lt;р&gt;&lt;а&gt; &lt;у&gt; &lt;К&gt;&lt;а&gt;&lt;р&gt;&lt;л&gt;&lt;а&gt; &lt;у&gt;&lt;к&gt;&lt;р&gt;&lt;а&gt;&lt;л&gt;&lt;а&gt; &lt;к&gt;&lt;л&gt;&lt;а&gt;&lt;р&gt;&lt;н&gt;&lt;е&gt;&lt;т&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"The quick brown Fox jumps over the lazy Dog"</span>, <span class="st">"[a-z]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ T&lt;h&gt;&lt;e&gt; &lt;q&gt;&lt;u&gt;&lt;i&gt;&lt;c&gt;&lt;k&gt; &lt;b&gt;&lt;r&gt;&lt;o&gt;&lt;w&gt;&lt;n&gt; F&lt;o&gt;&lt;x&gt; &lt;j&gt;&lt;u&gt;&lt;m&gt;&lt;p&gt;&lt;s&gt; &lt;o&gt;&lt;v&gt;&lt;e&gt;&lt;r&gt; &lt;t&gt;&lt;h&gt;&lt;e&gt; &lt;l&gt;&lt;a&gt;&lt;z&gt;&lt;y&gt; D&lt;o&gt;&lt;g&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"два 15 42. 42 15. 37 08 5. 20 20 20!"</span>, <span class="st">"[^0-9]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;д&gt;&lt;в&gt;&lt;а&gt;&lt; &gt;15&lt; &gt;42&lt;.&gt;&lt; &gt;42&lt; &gt;15&lt;.&gt;&lt; &gt;37&lt; &gt;08&lt; &gt;5&lt;.&gt;&lt; &gt;20&lt; &gt;20&lt; &gt;20&lt;!&gt;</code></pre>
</div>
</div>
<ul>
<li>выбор из нескольких групп</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"лар|рал|арл"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ К&lt;арл&gt; у К&lt;лар&gt;ы ук&lt;рал&gt; ко&lt;рал&gt;лы, а К&lt;лар&gt;а у К&lt;арл&gt;а ук&lt;рал&gt;а к&lt;лар&gt;нет</code></pre>
</div>
</div>
<ul>
<li>произвольный символ</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Везет Сенька Саньку с Сонькой на санках. Санки скок, Сеньку с ног, Соньку в лоб, все — в сугроб"</span>, <span class="st">"[Сс].н"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Везет &lt;Сен&gt;ька &lt;Сан&gt;ьку с &lt;Сон&gt;ькой на &lt;сан&gt;ках. &lt;Сан&gt;ки скок, &lt;Сен&gt;ьку &lt;с н&gt;ог, &lt;Сон&gt;ьку в лоб, все — в сугроб</code></pre>
</div>
</div>
<ul>
<li>знак начала и конца строки</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"от топота копыт пыль по полю летит."</span>, <span class="st">"^о"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;о&gt;т топота копыт пыль по полю летит.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"У ежа — ежата, у ужа — ужата"</span>, <span class="st">"жата$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ У ежа — ежата, у ужа — у&lt;жата&gt;</code></pre>
</div>
</div>
<ul>
<li>есть еще другие группы и другие обозначения уже приведенных групп, см. <code>?regex</code></li>
</ul>
</section>
<section id="квантификация" class="level3" data-number="4.8.3">
<h3 data-number="4.8.3" class="anchored" data-anchor-id="квантификация"><span class="header-section-number">4.8.3</span> Квантификация</h3>
<ul>
<li><code>?</code> — ноль или один раз</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"хорошее длинношеее животное"</span>, <span class="st">"еее?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ хорош&lt;ее&gt; длиннош&lt;еее&gt; животное</code></pre>
</div>
</div>
<ul>
<li><code>*</code> — ноль и более раз</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"хорошее длинношеее животное"</span>, <span class="st">"ее*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ хорош&lt;ее&gt; длиннош&lt;еее&gt; животно&lt;е&gt;</code></pre>
</div>
</div>
<ul>
<li><code>+</code> — один и более раз</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"хорошее длинношеее животное"</span>, <span class="st">"е+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ хорош&lt;ее&gt; длиннош&lt;еее&gt; животно&lt;е&gt;</code></pre>
</div>
</div>
<ul>
<li><code>{n}</code> — <code>n</code> раз</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"хорошее длинношеее животное"</span>, <span class="st">"е{2}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ хорош&lt;ее&gt; длиннош&lt;ее&gt;е животное</code></pre>
</div>
</div>
<ul>
<li><code>{n,}</code> — <code>n</code> раз и более</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"хорошее длинношеее животное"</span>, <span class="st">"е{1,}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ хорош&lt;ее&gt; длиннош&lt;еее&gt; животно&lt;е&gt;</code></pre>
</div>
</div>
<ul>
<li><code>{n,m}</code> — от <code>n</code> до <code>m</code>. Отсутствие пробела важно: <code>{1,2}</code> — правильно, <code>{1,␣2}</code> — неправильно.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"хорошее длинношеее животное"</span>, <span class="st">"е{2,3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ хорош&lt;ее&gt; длиннош&lt;еее&gt; животное</code></pre>
</div>
</div>
<ul>
<li>группировка символов</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Пушкиновед, Лермонтовед, Лермонтововед"</span>, <span class="st">"(ов)+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Пушкин&lt;ов&gt;ед, Лермонт&lt;ов&gt;ед, Лермонт&lt;овов&gt;ед</code></pre>
</div>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"беловатый, розоватый, розововатый"</span>, <span class="st">"(ов)+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ бел&lt;ов&gt;атый, роз&lt;ов&gt;атый, роз&lt;овов&gt;атый</code></pre>
</div>
</div>
<ul>
<li>жадный vs.&nbsp;нежадный алоритмы</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Пушкиновед, Лермонтовед, Лермонтововед"</span>, <span class="st">"в.*ед"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Пушкино&lt;вед, Лермонтовед, Лермонтововед&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Пушкиновед, Лермонтовед, Лермонтововед"</span>, <span class="st">"в.*?ед"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Пушкино&lt;вед&gt;, Лермонто&lt;вед&gt;, Лермонто&lt;вовед&gt;</code></pre>
</div>
</div>
</section>
<section id="позиционная-проверка-look-arounds" class="level3" data-number="4.8.4">
<h3 data-number="4.8.4" class="anchored" data-anchor-id="позиционная-проверка-look-arounds"><span class="header-section-number">4.8.4</span> Позиционная проверка (look arounds)</h3>
<p>Позиционная проверка – выглядит достаточно непоследовательно даже в свете остальных регулярных выражений.</p>
<p>Давайте найдем все <em>а</em> <strong>перед</strong> <em>р</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"а(?=р)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ К&lt;а&gt;рл у Кл&lt;а&gt;ры украл кораллы, а Кл&lt;а&gt;ра у К&lt;а&gt;рла украла кл&lt;а&gt;рнет</code></pre>
</div>
</div>
<p>А теперь все <em>а</em> <strong>перед</strong> <em>р</em> или <em>л</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"а(?=[рл])"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ К&lt;а&gt;рл у Кл&lt;а&gt;ры укр&lt;а&gt;л кор&lt;а&gt;ллы, а Кл&lt;а&gt;ра у К&lt;а&gt;рла укр&lt;а&gt;ла кл&lt;а&gt;рнет</code></pre>
</div>
</div>
<p>Давайте найдем все а <strong>после</strong> <em>р</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"(?&lt;=р)а"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Карл у Клары укр&lt;а&gt;л кор&lt;а&gt;ллы, а Клар&lt;а&gt; у Карла укр&lt;а&gt;ла кларнет</code></pre>
</div>
</div>
<p>А теперь все <em>а</em> <strong>после</strong> <em>р</em> или <em>л</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"(?&lt;=[рл])а"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Карл у Кл&lt;а&gt;ры укр&lt;а&gt;л кор&lt;а&gt;ллы, а Кл&lt;а&gt;р&lt;а&gt; у Карл&lt;а&gt; укр&lt;а&gt;л&lt;а&gt; кл&lt;а&gt;рнет</code></pre>
</div>
</div>
<p>Также у этих выражений есть формы с отрицанием. Давайте найдем все <em>р</em> <strong>не перед</strong> <em>а</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"р(?!а)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Ка&lt;р&gt;л у Кла&lt;р&gt;ы украл кораллы, а Клара у Ка&lt;р&gt;ла украла кла&lt;р&gt;нет</code></pre>
</div>
</div>
<p>А теперь все <em>р</em> <strong>не после</strong> <em>а</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="st">"Карл у Клары украл кораллы, а Клара у Карла украла кларнет"</span>, <span class="st">"(?&lt;!а)р"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Карл у Клары ук&lt;р&gt;ал ко&lt;р&gt;аллы, а Клара у Карла ук&lt;р&gt;ала кларнет</code></pre>
</div>
</div>
<p>Запомнить с ходу это достаточно сложно, так что подсматривайте сюда:</p>


</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Lorem ipsum — классический текст-заполнитель на основе трактата Марка Туллия Цицерона “О пределах добра и зла”. Его используют, чтобы посмотреть, как страница смотрится, когда заполнена текстом<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./3_data_visualization.html" class="pagination-link" aria-label="Визуализация данных">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Визуализация данных</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./5_working_with_texts.html" class="pagination-link" aria-label="Работа с текстами">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Работа с текстами</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>